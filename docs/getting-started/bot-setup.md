# Настройка Telegram‑бота и Mini App URL

Этот раздел описывает, как создать бота в Telegram, указать ссылку на Mini App и связать бота с вашей CRM.

## 1. Создание бота через @BotFather
1. Откройте Telegram и найдите официальный бот @BotFather.  
2. Нажмите Start и выполните команду /newbot.  
3. Укажите имя и @username вашего бота (оканчивается на `bot`).  
4. Сохраните токен, который пришлёт BotFather — он понадобится для бэкенда/CRM.

Полезно: задайте аватарку (/setuserpic), описание (/setdescription) и команды (/setcommands) для удобства пользователей.

## 2. Установка Mini App (Web App) URL
В BotFather откройте:
- /mybots → выберите вашего бота → Bot Settings → Menu Button → Configure Menu Button.  
- Добавьте кнопку «Open Web App» и укажите Mini App URL, который виден в CRM в разделе «Настройки бота» или «Интеграции».

Если доступен параметр «Allowed domains», добавьте домен Mini App (например, `https://app.example.com`). Это повышает безопасность WebApp.

## 3. Подключение бота к CRM/бэкенду
1. В CRM откройте «Настройки бота» и вставьте токен, полученный от BotFather.  
2. Укажите публичный URL вашего бэкенда (если требуется для webhook) и сохраните.  
3. Проверьте, что статус интеграции «Подключено».

Примечание: Mini App (Web App) может работать без webhook (как витрина), но для обработок заказов, уведомлений и статусов, как правило, требуется сервер и подписка на обновления.

## 4. Проверка запуска
1. Откройте диалог с ботом, нажмите кнопку меню и запустите Mini App.  
2. Убедитесь, что отображается ваш каталог/приветственный экран.  
3. Создайте тестовый заказ и проверьте, что он попадает в CRM и меняет статусы.

## 5. Настройки безопасности
- Используйте HTTPS для Mini App и бэкенда.  
- Ограничьте доступ к административной панели CRM по ролям.  
- Храните токены и ключи в защищённых переменных окружения.
